#include <stdio.h>

// Функция для проверки, является ли строка палиндромом
int is_palindrome(char* str, int start, int end) {
    while (start < end) {
        if (str[start] != str[end]) {
            return 0; // Не палиндром
        }
        start++;
        end--;
    }
    return 1; // Палиндром
}

int main() {
    char str[200];  // Максимальная длина строки — 200 символов
    int i, j, length, max_len, start;

    // Ввод строки
    printf("Введите строку: ");
    fgets(str, 200, stdin);

    // Убираем символ новой строки, если он присутствует
    for (i = 0; str[i] != '\0'; i++) {
        if (str[i] == '\n') {
            str[i] = '\0';
        }
    }

    // Удаляем пробелы из строки
    char temp_str[200];  // Строка без пробелов для поиска палиндромов
    j = 0;
    for (i = 0; str[i] != '\0'; i++) {
        if (str[i] != ' ') {
            temp_str[j++] = str[i];
        }
    }
    temp_str[j] = '\0'; // Завершаем строку без пробелов

    // Печатаем строку без пробелов
    printf("Строка без пробелов: %s\n", temp_str);

    // Если строка пуста после удаления пробелов, выводим соответствующее сообщение
    if (temp_str[0] == '\0') {
        printf("Строка пуста после удаления пробелов.\n");
        return 0;
    }

    // Подсчёт длины строки без пробелов
    length = 0;
    while (temp_str[length] != '\0') {
        length++; // Подсчёт длины строки
    }

    // Повторяем, пока не будут удалены все палиндромы
    while (length > 0) {
        max_len = 0;
        start = -1;

        // Ищем максимальный палиндром
        for (i = 0; i < length; i++) {
            for (j = i; j < length; j++) {
                if (is_palindrome(temp_str, i, j) && (j - i + 1) > max_len) {
                    max_len = j - i + 1;
                    start = i;
                }
            }
        }

        // Если найден палиндром, удалим его из оригинальной строки
        if (max_len > 0) {
            for (i = start; i < start + max_len; i++) {
                str[i] = ' '; // Заменяем палиндром на пробелы в исходной строке
            }
            length -= max_len; // Уменьшаем длину строки
        } else {
            break; // Прерываем, если палиндромов больше не найдено
        }
    }

    // Выводим результат после удаления палиндромов
    printf("Результат после удаления палиндромов: %s\n", str);

    return 0;
}
